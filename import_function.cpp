#include <Windows.h>

#ifdef _UNICODE
typedef DWORD (WINAPI *MyFunction1)(LPVOID lpParam);
typedef BOOL (WINAPI *MyFunction2)(LPCWSTR lpFileName);
#else
typedef DWORD (WINAPI *MyFunction1)(LPVOID lpParam);
typedef BOOL (WINAPI *MyFunction2)(LPCSTR lpFileName);
#endif

MyFunction1 loadFunction1(HMODULE hModule, LPCSTR lpProcName) {
    return (MyFunction1)GetProcAddress(hModule, lpProcName);
}
MyFunction2 loadFunction2(HMODULE hModule, LPCSTR lpProcName) {
    return (MyFunction2)GetProcAddress(hModule, lpProcName);
}

int main() {
    HMODULE hModule = LoadLibraryW(L"example.dll");
    if (hModule == NULL) {
        return 1;
    }

    MyFunction1 func1 = loadFunction1(hModule, "MyFunction1Name");
    if (func1 == NULL) {
        FreeLibrary(hModule);
        return 1;
    }
    DWORD result1 = func1(NULL);

    MyFunction2 func2 = loadFunction2(hModule, "MyFunction2Name");
    if (func2 == NULL) {
        FreeLibrary(hModule);
        return 1;
    }
    #ifdef _UNICODE
    BOOL result2 = func2(L"example.txt");
    #else
    BOOL result2 = func2("example.txt");
    #endif

    FreeLibrary(hModule);
    return 0;
}
